<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 모든 SQL문을 mapper태그 안에 작성 -->
<mapper namespace="boardMapper">
	<!-- resultMap 작성 -->
	<resultMap type="dto.BoardDTO" id="board">
		<result column="BOARD_NUM" 		property="boardNum"/>
		<result column="TITLE" 			property="title"/>
		<result column="CONTENT" 		property="content"/>
		<result column="MEMBER_ID" 		property="memberId"/>
		<result column="CREATE_DATE" 	property="createDate"/>
		<result column="READ_CNT" 		property="readCnt"/>
		<result column="FILE_NAME" 		property="fileName"/>
	</resultMap>
	
	<!-- 쿼리작성 -->
	<select id="selectBoardList" resultMap="board">
		SELECT BOARD_NUM
				, TITLE
				, MEMBER_ID
				, TO_CHAR(CREATE_DATE, 'YYYY-MM-DD') AS CREATE_DATE
				, READ_CNT
				, FILE_NAME
			FROM BOARD
			ORDER BY BOARD_NUM DESC
	</select>
	
	<select id="selectBoardDetail" resultMap="board">
		SELECT BOARD_NUM
			, TITLE
			, CONTENT
			, MEMBER_ID
			, TO_CHAR(CREATE_DATE, 'YYYY-MM-DD')
			, READ_CNT
			, FILE_NAME
		FROM BOARD
		WHERE BOARD_NUM = #{boardNum}
	</select>
	
	<delete id="deleteBoard">
		DELETE BOARD
		WHERE BOARD_NUM = #{boardNum}
	</delete>
	
	<update id="updateBoard">
		UPDATE BOARD
		SET TITLE = #{title}
		, CONTENT = #{content}
		WHERE BOARD_NUM = #{boardNum}
	</update>
	
   <insert id="insertBoard">
      INSERT INTO BOARD (
         BOARD_NUM
         , TITLE
         , CONTENT
         , MEMBER_ID
      ) VALUES (
         (SELECT NVL(MAX(BOARD_NUM) + 1, 1) FROM BOARD)
         , #{title}
         , #{content}
         , '원호'
      )
   </insert>
	
	
	
	
	
	
	
</mapper>